<view class="chat-page {{isPageActive ? 'page-active' : ''}}">
  <view class="top-bar">
    <view class="title-lg">AI 助手</view>
    <view class="coin-pill">
      <image class="avatar-xs" src="https://api.dicebear.com/7.x/avataaars/svg?seed=Jessica"></image>
    </view>
  </view>

  <scroll-view class="chat-scroll" scroll-y scroll-top="{{scrollTop}}" scroll-with-animation enable-back-to-top>
    <view class="bot-profile">
      <image class="bot-avatar-lg" src="https://api.dicebear.com/7.x/avataaars/svg?seed=Jessica"></image>
      <view class="bot-text">
        <view class="title-md">DeepCareer 助手</view>
        <view class="sub-text">专业职业规划顾问</view>
      </view>
    </view>

    <block wx:for="{{messages}}" wx:key="id">
      <view class="msg-row {{item.type === 'user' ? 'msg-row-reverse' : ''}}">
        <image class="avatar-sm" src="{{item.type === 'user' ? 'https://api.dicebear.com/7.x/avataaars/svg?seed=Felix' : 'https://api.dicebear.com/7.x/avataaars/svg?seed=Jessica'}}"></image>
        <view class="msg-bubble {{item.type === 'user' ? 'bubble-user' : 'bubble-bot'}}">
          <text user-select>{{item.text}}</text>
        </view>
      </view>
    </block>
    
    <view style="height: 40rpx;"></view>
  </scroll-view>

  <view class="bottom-area">
    <scroll-view scroll-x class="chips-scroll" enable-flex>
      <view class="flex-row">
        <block wx:for="{{chips}}" wx:key="*this">
          <view class="chip" bindtap="handleChip" data-text="{{item}}">{{item}}</view>
        </block>
      </view>
    </scroll-view>
    
    <view class="input-container">
      <input class="chat-input" value="{{inputValue}}" bindinput="onInput" placeholder="输入你的问题..." confirm-type="send" bindconfirm="handleSend" cursor-spacing="20"/>
      <view class="send-btn" bindtap="handleSend" hover-class="btn-active">
        <view class="arrow-icon">↑</view>
      </view>
    </view>
  </view>
</view>