<view class="detail-page" wx:if="{{!isLoading && career}}">
  <!-- Top Image Header -->
  <view class="header-image-area">
    <image class="header-bg" src="https://images.unsplash.com/photo-1498050108023-c5249f4df085?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80" mode="aspectFill"></image>
    <view class="header-overlay"></view>
    <view class="back-btn-white" bindtap="onBack">â†</view>
    
    <view class="header-text">
      <view class="career-title">{{career.title}}</view>
      <view class="career-sub">{{career.category}}</view>
    </view>
  </view>

  <view class="content-body">
    <!-- ç»Ÿè®¡æ•°æ® -->
    <view class="stats-row">
      <view class="stat-item">
        <view class="stat-val">{{career.stats.avg_salary}}</view>
        <view class="stat-label">å¹³å‡æœˆè–ª</view>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item">
        <view class="stat-val">{{career.stats.talent_scarcity}}</view>
        <view class="stat-label">äººæ‰ç´§ç¼ºåº¦</view>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item">
        <view class="stat-val">{{career.stats.growth_rate}}</view>
        <view class="stat-label">å¹´å¢é•¿ç‡</view>
      </view>
    </view>

    <!-- æŠ€èƒ½æ ‡ç­¾ -->
    <view class="section">
      <view class="sec-title">æ ¸å¿ƒæŠ€èƒ½</view>
      <view class="tags-wrap">
        <block wx:for="{{career.tags}}" wx:key="*this">
          <view class="skill-tag">{{item}}</view>
        </block>
      </view>
    </view>

    <!-- è–ªèµ„è¶‹åŠ¿ (åŠ¨æ€æ¸²æŸ“) -->
    <view class="section" wx:if="{{career.salary_growth && career.salary_growth.length > 0}}">
      <view class="sec-title">è–ªèµ„æ™‹å‡è·¯å¾„</view>
      <view class="chart-box">
        <block wx:for="{{career.salary_growth}}" wx:key="level">
          <view class="chart-bar-group">
            <view class="chart-bar {{index === 2 ? 'active' : ''}}" style="height: {{item.height}};"></view>
            <text class="bar-label">{{item.level}}</text>
            <text class="bar-val">{{item.salary}}</text>
          </view>
        </block>
      </view>
    </view>

    <!-- å­¦ä¹ è·¯çº¿ -->
    <view class="section" wx:if="{{career.roadmap && career.roadmap.length > 0}}">
      <view class="sec-title">æ¨èå­¦ä¹ è·¯çº¿</view>
      <block wx:for="{{career.roadmap}}" wx:key="step">
        <view class="roadmap-item">
          <view class="rm-circle {{index === 0 ? 'active' : ''}}">{{item.step}}</view>
          <view class="rm-content">
            <view class="rm-title">{{item.title}}</view>
            <view class="rm-desc">{{item.desc}}</view>
          </view>
        </view>
        <!-- æœ€åä¸€é¡¹ä¸æ˜¾ç¤ºè¿æ¥çº¿ -->
        <view class="roadmap-line" wx:if="{{index < career.roadmap.length - 1}}"></view>
      </block>
    </view>
    
    <view style="height: 40rpx;"></view>
  </view>

  <view class="bottom-action-bar">
    <button class="btn-start-plan" bindtap="startPlan">å¼€å¯å­¦ä¹ è®¡åˆ’</button>
  </view>
</view>

<!-- Loading / Error State -->
<view wx:if="{{isLoading}}" class="g-loading-box">
  <view class="g-loading-spinner"></view>
  <view>åŠ è½½ä¸­...</view>
</view>

<view wx:if="{{!isLoading && !career}}" class="g-empty-box">
  <view class="g-empty-icon">ğŸ“„</view>
  <view class="g-empty-text">{{errorMsg || 'æš‚æ— æ•°æ®'}}</view>
  <button bindtap="onBack" style="margin-top: 20rpx;">è¿”å›</button>
</view>