<view class="container">
  <!-- Loading 状态 -->
  <view wx:if="{{isLoading}}" class="loading-box">
    <view class="loading-spinner"></view>
    <view class="loading-text">AI 正在生成分析报告...</view>
  </view>

  <block wx:else>
    <!-- 1. 结果总览卡片 -->
    <view class="result-card">
      <view class="result-header">
        <view class="user-avatar">
          <image src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix" mode="aspectFill"></image>
        </view>
        <view class="result-title">您的职业性格类型</view>
        <view class="result-type">{{report.type}}</view>
      </view>
      
      <view class="tags-row">
        <view class="tag" wx:for="{{report.tags}}" wx:key="*this">{{item}}</view>
      </view>

      <view class="score-circle">
        <text class="score-val">{{report.score}}</text>
        <text class="score-label">潜力指数</text>
      </view>
    </view>

    <!-- 2. 能力维度分析 (使用条形图模拟) -->
    <view class="section-card">
      <view class="section-title">能力维度解析</view>
      <view class="dimension-list">
        <view class="dimension-item" wx:for="{{report.dimensions}}" wx:key="name">
          <view class="dim-name">{{item.name}}</view>
          <view class="dim-bar-bg">
            <view class="dim-bar-fill" style="width: {{item.value}}%"></view>
          </view>
          <view class="dim-val">{{item.value}}</view>
        </view>
      </view>
    </view>

    <!-- 3. 推荐岗位 -->
    <view class="section-card">
      <view class="section-title">推荐职业方向</view>
      <view class="career-list">
        <view class="career-item" 
              wx:for="{{report.careers}}" 
              wx:key="title"
              bindtap="viewCareerDetail"
              data-index="{{index}}">
          <view class="career-header">
            <view class="career-title">{{item.title}}</view>
            <view class="match-badge">匹配度 {{item.match}}%</view>
          </view>
          <view class="career-desc">{{item.desc}}</view>
          <view class="career-arrow">></view>
        </view>
      </view>
    </view>

    <!-- 4. 发展建议 -->
    <view class="section-card advice-card">
      <view class="section-title">AI 发展建议</view>
      <view class="advice-content">
        <text class="quote-icon">“</text>
        {{report.advice}}
      </view>
    </view>

    <view class="footer-action">
      <button class="btn-home" bindtap="goHome">返回测评首页</button>
    </view>
  </block>
</view>