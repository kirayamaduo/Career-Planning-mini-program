<view class="diagnosis-page">
  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading-container">
    <view class="loading-spinner"></view>
    <view class="loading-text">AI æ­£åœ¨æ·±åº¦åˆ†ææ‚¨çš„ç®€å†...</view>
  </view>

  <!-- è¯Šæ–­ç»“æœ -->
  <view wx:else class="content-container">
    <!-- å¤´éƒ¨è¯„åˆ†å¡ç‰‡ -->
    <view class="score-card">
      <view class="score-header">
        <view class="score-main">
          <text class="score-num">{{score}}</text>
          <text class="score-total">/100</text>
        </view>
        <view class="grade-badge grade-{{grade}}">
          <text class="grade-text">{{grade}}</text>
          <text class="grade-label">{{gradeText}}</text>
        </view>
      </view>
      <view class="score-desc">æ‚¨çš„ç®€å†å·²è¶…è¿‡ {{score}}% çš„æ±‚èŒè€…</view>
    </view>

    <!-- å®Œæ•´åˆ†ææŠ¥å‘Š -->
    <view class="report-section">
      <view class="section-title">
        <text class="title-icon">ğŸ“‹</text>
        <text class="title-text">è¯¦ç»†åˆ†ææŠ¥å‘Š</text>
      </view>
      <view class="report-content">
        <text class="report-text">{{fullReport}}</text>
      </view>
    </view>

    <!-- ä¼˜åŒ–å»ºè®®åˆ—è¡¨ -->
    <view class="suggestions-section">
      <view class="section-title">
        <text class="title-icon">ğŸ’¡</text>
        <text class="title-text">ä¼˜åŒ–å»ºè®® ({{suggestions.length}})</text>
      </view>
      
      <view class="suggestions-list">
        <view 
          wx:for="{{suggestions}}" 
          wx:key="index"
          class="suggestion-card suggestion-{{item.type}}"
          bindtap="handleSuggestionDetail"
          data-index="{{index}}"
        >
          <view class="suggestion-header">
            <view class="suggestion-icon">{{item.icon}}</view>
            <view class="suggestion-info">
              <view class="suggestion-title">{{item.title}}</view>
              <view class="suggestion-brief">{{item.brief}}</view>
            </view>
            <view class="arrow-icon">â€º</view>
          </view>
        </view>
      </view>
    </view>

    <!-- åº•éƒ¨æ“ä½œæŒ‰é’® -->
    <view class="action-buttons">
      <button class="btn-secondary" bindtap="handleBackToResume">è¿”å›ç®€å†ä¸­å¿ƒ</button>
    </view>
  </view>
</view>

